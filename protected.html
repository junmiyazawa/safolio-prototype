
<!doctype html><html lang="ja"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Safolio — 限定公開ビュー</title>
<meta name="robots" content="noindex,noai,noimageai">
<link rel="stylesheet" href="styles.css">
</head><body oncontextmenu="return false;">
<header class="header">
  <div class="container inner">
    <div class="brand"><div class="logo"></div><strong>Safolio</strong><span class="small">Limited View</span></div>
    <div><span class="pill">期限付きリンク</span></div>
  </div>
</header>
<main class="container">
  <section class="card">
    <h3>限定公開ビュー</h3>
    <p class="small">このページは期限付きリンクでのみ閲覧でき、ダウンロードは制限されています。</p>
    <div class="preview-wrap">
      <img class="preview-img" src="assets/work_1.png" alt="protected" draggable="false" ondragstart="return false;">
    </div>
    <p id="status" class="small"></p>
  </section>
</main>
<footer class="footer">
  <div class="container">© 2025 Safolio.</div>
</footer>
<script>
(function(){
  const params = new URLSearchParams(location.search);
  const t = params.get('t');
  const status = document.getElementById('status');
  if(!t){
    status.textContent = 'リンクが不正です。';
    document.body.innerHTML += '<style>.preview-wrap{display:none}</style>';
    return;
  }
  try{
    const payload = JSON.parse(atob(t));
    if(Date.now() > payload.exp){
      status.textContent = '有効期限が切れています。新しいリンクを発行してください。';
      document.body.innerHTML += '<style>.preview-wrap{filter: blur(6px)}</style>';
      return;
    }
    const remain = Math.max(0, payload.exp - Date.now());
    const mins = Math.ceil(remain/60000);
    status.textContent = '有効期限まで約 ' + mins + ' 分';
  }catch(e){
    status.textContent = 'リンクを検証できませんでした。';
  }
})();
// Disable context menu globally
document.addEventListener('contextmenu', e => e.preventDefault());
</script>
</body></html>
